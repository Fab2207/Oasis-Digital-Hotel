<!DOCTYPE html>
<html class="dark" lang="es" xmlns:th="http://www.thymeleaf.org">
  <head th:fragment="head">
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title th:text="${pageTitle} ?: 'Oasis Digital'">Oasis Digital</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet"
    />
    <script src="/js/theme.js"></script>
    <script
      th:src="@{/js/auth-animations.js(v=${#dates.createNow().getTime()})}"
      defer
    ></script>

    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "var(--color-primary)",
              accent: "var(--color-accent)",
              "background-light": "#f6f8f7",
              "background-dark": "#121212",
              "surface-dark": "#1E1E1E",
              "border-dark": "#2A2A2A",
            },
            fontFamily: {
              display: ["Outfit", "sans-serif"],
              sans: ["Outfit", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "var(--border-radius)",
              lg: "var(--border-radius)",
              xl: "calc(var(--border-radius) + 0.25rem)",
              2: "calc(var(--border-radius) + 0.5rem)",
              full: "9999px",
            },
            boxShadow: {
              glass: "0 4px 30px rgba(0, 0, 0, 0.1)",
              neon: "0 0 10px var(--color-primary), 0 0 20px var(--color-primary)",
            },
          },
        },
      };
    </script>
    <style>
      .material-symbols-outlined {
        font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
        font-feature-settings: "liga";
        -webkit-font-feature-settings: "liga";
      }

      /* Glassmorphism Utilities */
      .glass-panel {
        background: rgba(18, 18, 18, 0.7);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.08);
      }

      .glass-card {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        transition: all 0.3s ease;
      }

      .glass-card:hover {
        background: rgba(255, 255, 255, 0.05);
        border-color: var(--color-primary);
        transform: translateY(-2px);
        box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
      }

      /* Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #121212;
      }
      ::-webkit-scrollbar-thumb {
        background: #333;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #444;
      }
    </style>
    <script>
      // Blocking script to prevent FOUC
      if (
        localStorage.getItem("color-theme") === "dark" ||
        (!("color-theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    </script>
  </head>
  <body
    class="bg-background-light dark:bg-background-dark font-display text-gray-900 dark:text-gray-100"
  >
    <!-- SideNavBar Fragment -->
    <aside
      th:fragment="sidebar"
      class="flex flex-col flex-shrink-0 w-72 bg-[#121212] border-r border-white/5 relative z-20"
    >
      <!-- Logo Area -->
      <div class="flex items-center gap-4 px-8 py-8">
        <div
          class="flex items-center justify-center bg-gradient-to-br from-primary to-primary/60 rounded-xl size-12 text-white shadow-lg shadow-primary/20"
        >
          <span class="material-symbols-outlined text-3xl">spa</span>
        </div>
        <div class="flex flex-col">
          <h1 class="text-white text-xl font-bold tracking-tight">
            Oasis Digital
          </h1>
          <p class="text-white/40 text-xs font-medium tracking-wider uppercase">
            Gestión Hotelera
          </p>
        </div>
      </div>

      <!-- Navigation -->
      <nav class="flex flex-col gap-1.5 px-4 flex-1 overflow-y-auto py-4">
        <p
          class="px-4 text-xs font-bold text-white/30 uppercase tracking-widest mb-2"
        >
          Menu Principal
        </p>

        <!-- ADMIN & RECEPCIONISTA (Shared Dashboard/Panel) -->
        <a
          sec:authorize="hasRole('ROLE_ADMIN')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${request?.requestURI == '/dashboard' ? 'bg-primary/10 text-primary border border-primary/20 shadow-lg shadow-primary/5' : ''}"
          th:href="@{/dashboard}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            th:classappend="${request?.requestURI == '/dashboard' ? 'text-primary fill' : ''}"
            >dashboard</span
          >
          <p class="text-sm font-medium">Panel General</p>
        </a>

        <!-- RECEPCIONISTA Panel Operativo -->
        <a
          sec:authorize="hasRole('ROLE_RECEPCIONISTA')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${request?.requestURI == '/recepcion' ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/recepcion}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >concierge</span
          >
          <p class="text-sm font-medium">Recepción</p>
        </a>

        <!-- CLIENTE Dashboard -->
        <a
          sec:authorize="hasRole('ROLE_CLIENTE')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${request?.requestURI == '/cliente/area' ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/cliente/area}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >dashboard</span
          >
          <p class="text-sm font-medium">Mi Panel</p>
        </a>

        <!-- RESERVAS (All Roles) -->
        <a
          sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_RECEPCIONISTA')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.startsWith('/reservas') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/reservas}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >calendar_month</span
          >
          <p class="text-sm font-medium">Reservas</p>
        </a>
        <a
          sec:authorize="hasRole('ROLE_CLIENTE')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.contains('/reservas/crear') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/cliente/reservas/crear}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >calendar_add_on</span
          >
          <p class="text-sm font-medium">Nueva Reserva</p>
        </a>

        <!-- HUESPEDES (Admin & Recep) -->
        <a
          sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_RECEPCIONISTA')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.startsWith('/clientes') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/clientes}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >group</span
          >
          <p class="text-sm font-medium">Huéspedes</p>
        </a>

        <!-- HABITACIONES (Admin & Recep) -->
        <a
          sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_RECEPCIONISTA')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.startsWith('/habitaciones') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/habitaciones}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >bed</span
          >
          <p class="text-sm font-medium">Habitaciones</p>
        </a>

        <!-- CALENDARIO (Admin & Recep) -->
        <a
          sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_RECEPCIONISTA')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${request?.requestURI == '/calendario' ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/calendario}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >event_available</span
          >
          <p class="text-sm font-medium">Calendario</p>
        </a>

        <p
          sec:authorize="hasRole('ROLE_ADMIN')"
          class="px-4 text-xs font-bold text-white/30 uppercase tracking-widest mt-6 mb-2"
        >
          Administración
        </p>

        <!-- REPORTES (Admin Only) -->
        <a
          sec:authorize="hasRole('ROLE_ADMIN')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.startsWith('/reportes') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/reportes}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >bar_chart</span
          >
          <p class="text-sm font-medium">Reportes</p>
        </a>

        <!-- EMPLEADOS (Admin Only) -->
        <a
          sec:authorize="hasRole('ROLE_ADMIN')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.startsWith('/empleados') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/empleados}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >badge</span
          >
          <p class="text-sm font-medium">Empleados</p>
        </a>

        <!-- DESCUENTOS (Admin Only) -->
        <a
          sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_RECEPCIONISTA')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.startsWith('/descuentos') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/descuentos}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >sell</span
          >
          <p class="text-sm font-medium">Descuentos</p>
        </a>

        <!-- AUDITORÍA (Admin Only) -->
        <a
          sec:authorize="hasRole('ROLE_ADMIN')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.startsWith('/auditoria') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/auditoria/logs}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >admin_panel_settings</span
          >
          <p class="text-sm font-medium">Auditoría</p>
        </a>

        <!-- SERVICIOS (Admin & Recep) -->
        <a
          sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_RECEPCIONISTA')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.startsWith('/servicios') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/servicios}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >room_service</span
          >
          <p class="text-sm font-medium">Servicios</p>
        </a>

        <!-- RESEÑAS (Admin & Recep) -->
        <a
          sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_RECEPCIONISTA')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${(request?.requestURI?.startsWith('/resenas') == true) ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/resenas}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >reviews</span
          >
          <p class="text-sm font-medium">Reseñas</p>
        </a>

        <!-- DATOS PERSONALES (Cliente Only) -->
        <a
          sec:authorize="hasRole('ROLE_CLIENTE')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${request?.requestURI == '/cliente/perfil' ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/cliente/perfil}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >person</span
          >
          <p class="text-sm font-medium">Datos Personales</p>
        </a>

        <!-- HISTORIAL (Cliente Only) -->
        <a
          sec:authorize="hasRole('ROLE_CLIENTE')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${request?.requestURI == '/cliente/historial' ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/cliente/historial}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >history</span
          >
          <p class="text-sm font-medium">Historial</p>
        </a>

        <!-- RESEÑAS (Cliente Only) -->
        <a
          sec:authorize="hasRole('ROLE_CLIENTE')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${request?.requestURI == '/resenas/mis-resenas' ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/resenas/mis-resenas}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >rate_review</span
          >
          <p class="text-sm font-medium">Mis Reseñas</p>
        </a>

        <!-- CONFIGURACION (Admin Only) -->
        <a
          sec:authorize="hasRole('ROLE_ADMIN')"
          class="flex items-center gap-3 px-4 py-3.5 rounded-xl text-white/70 hover:bg-primary/10 hover:text-primary transition-all duration-200 group"
          th:classappend="${request?.requestURI == '/configuracion' ? 'bg-primary/10 text-primary border border-primary/20' : ''}"
          th:href="@{/configuracion}"
        >
          <span
            class="material-symbols-outlined group-hover:scale-110 transition-transform duration-200"
            >settings</span
          >
          <p class="text-sm font-medium">Configuración</p>
        </a>
      </nav>

      <!-- User Profile Bottom -->
      <div class="p-4 border-t border-white/5 bg-black/20">
        <div class="flex items-center gap-3">
          <div
            class="flex items-center justify-center bg-gradient-to-br from-gray-800 to-black border border-white/10 rounded-full size-10 text-white/60 shadow-inner"
          >
            <span class="material-symbols-outlined">account_circle</span>
          </div>
          <div class="flex flex-col flex-1 min-w-0">
            <p
              class="text-sm font-bold text-white truncate"
              sec:authentication="name"
            >
              Usuario
            </p>
            <p class="text-xs text-white/50 truncate">
              <span sec:authorize="hasRole('ROLE_ADMIN')">Administrador</span>
              <span sec:authorize="hasRole('ROLE_RECEPCIONISTA')"
                >Recepcionista</span
              >
              <span sec:authorize="hasRole('ROLE_CLIENTE')">Cliente</span>
            </p>
          </div>
          <form
            th:action="@{/logout}"
            method="post"
            class="inline"
            id="logoutForm"
          >
            <button
              type="button"
              onclick="if(typeof showLogoutAnimation === 'function') { showLogoutAnimation(); setTimeout(() => { document.getElementById('logoutForm').submit(); }, 2500); } else { document.getElementById('logoutForm').submit(); }"
              class="p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all duration-200"
              title="Cerrar Sesión"
            >
              <span class="material-symbols-outlined">logout</span>
            </button>
          </form>
        </div>
      </div>

      <!-- Logout Animation Overlay -->
      <div
        id="logoutAnimation"
        class="fixed inset-0 z-[9999] hidden items-center justify-center bg-[#4a0000]/95 backdrop-blur-md transition-opacity duration-500"
      >
        <div class="flex flex-col items-center gap-6 animate-bounce">
          <span
            class="material-symbols-outlined text-9xl text-primary drop-shadow-[0_0_30px_rgba(4,99,7,0.5)]"
            style="font-size: 120px"
            >diamond</span
          >
          <h2 class="text-4xl font-black text-white tracking-tight">
            Hasta Pronto
          </h2>
          <p class="text-2xl font-bold text-white/60">Cerrando sesión...</p>
        </div>
      </div>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const logoutForms = document.querySelectorAll(
            'form[action$="/logout"]'
          );
          const logoutAnimation = document.getElementById("logoutAnimation");

          logoutForms.forEach((form) => {
            form.addEventListener("submit", function (e) {
              e.preventDefault();
              logoutAnimation.classList.remove("hidden");
              logoutAnimation.classList.add("flex");
              setTimeout(() => {
                this.submit();
              }, 1500);
            });
          });
        });

        function toggleNotifications() {
          const dropdown = document.getElementById("notificationDropdown");
          dropdown.classList.toggle("hidden");
        }

        // Close dropdown when clicking outside
        document.addEventListener("click", function (event) {
          const dropdown = document.getElementById("notificationDropdown");
          const button = document.querySelector(
            "button[onclick='toggleNotifications()']"
          );
          if (
            !dropdown.contains(event.target) &&
            !button.contains(event.target)
          ) {
            dropdown.classList.add("hidden");
          }
        });

        function markAllAsRead() {
          fetch("/notificaciones/api/marcar-todas-leidas", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "X-CSRF-TOKEN":
                document.querySelector('meta[name="_csrf"]')?.content || "",
            },
          })
            .then((response) => {
              if (response.ok) {
                // Remove badge
                const badge = document.querySelector(
                  ".material-symbols-outlined + span.bg-red-500"
                );
                if (badge) badge.remove();

                // Update list styles (optional, or just reload)
                window.location.reload();
              }
            })
            .catch((error) =>
              console.error("Error marking notifications as read:", error)
            );
        }
      </script>
    </aside>

    <!-- TopNavBar Fragment -->
    <header
      th:fragment="navbar"
      class="flex items-center justify-between whitespace-nowrap px-8 py-5 bg-transparent"
    >
      <div class="flex flex-col">
        <h2
          class="text-3xl font-bold text-white tracking-tight"
          th:text="${pageTitle} ?: 'Panel de Control'"
        >
          Panel de Control
        </h2>
        <div th:replace="fragments/common :: breadcrumbs"></div>
      </div>

      <div class="flex items-center gap-6">
        <!-- Search Bar -->
        <div class="relative group">
          <span
            class="absolute inset-y-0 left-0 flex items-center pl-4 text-white/40 group-focus-within:text-primary transition-colors"
          >
            <span class="material-symbols-outlined">search</span>
          </span>
          <input
            type="text"
            class="pl-12 pr-4 py-2.5 rounded-full bg-white/5 border border-white/10 text-white placeholder-white/30 focus:ring-2 focus:ring-primary/50 focus:border-primary/50 focus:bg-black/40 w-64 transition-all duration-300"
            placeholder="Buscar..."
          />
        </div>

        <!-- Notifications -->
        <div class="relative group h-full flex items-center">
          <button
            class="p-2.5 rounded-full text-white/70 hover:bg-primary/10 hover:text-primary border border-transparent hover:border-primary/10 transition-all duration-200 relative"
            onclick="toggleNotifications()"
          >
            <span class="material-symbols-outlined">notifications</span>
            <span
              th:if="${notificaciones != null && !notificaciones.?[!leida].isEmpty()}"
              class="absolute top-2 right-2 size-2.5 bg-red-500 rounded-full shadow-[0_0_10px_rgba(239,68,68,0.5)]"
            ></span>
          </button>
          <!-- Dropdown -->
          <div
            class="absolute right-0 top-full mt-2 w-80 bg-[#1A1A1A] border border-white/10 rounded-2xl shadow-2xl hidden z-50 overflow-hidden"
            id="notificationDropdown"
          >
            <div
              class="p-4 border-b border-white/5 flex justify-between items-center bg-white/5"
            >
              <h3 class="font-bold text-white">Notificaciones</h3>
              <div class="flex gap-3">
                <button
                  onclick="markAllAsRead()"
                  class="text-xs text-white/60 hover:text-white font-medium transition-colors"
                  title="Marcar todas como leídas"
                >
                  <span class="material-symbols-outlined text-base align-middle"
                    >done_all</span
                  >
                </button>
                <a
                  th:href="@{/notificaciones}"
                  class="text-xs text-primary font-semibold hover:text-primary/80"
                  >Ver todas</a
                >
              </div>
            </div>
            <div class="max-h-64 overflow-y-auto">
              <div
                th:if="${notificaciones == null || notificaciones.empty}"
                class="p-8 text-center text-white/40 text-sm flex flex-col items-center gap-2"
              >
                <span class="material-symbols-outlined text-3xl opacity-50"
                  >notifications_off</span
                >
                No tienes nuevas notificaciones.
              </div>
              <div th:if="${notificaciones != null && !notificaciones.empty}">
                <a
                  th:each="notificacion : ${notificaciones}"
                  th:href="@{/notificaciones}"
                  class="block p-4 border-b border-white/5 hover:bg-white/5 transition-colors"
                  th:classappend="${!notificacion.leida ? 'bg-white/5' : ''}"
                >
                  <div class="flex gap-3">
                    <div
                      class="size-8 rounded-full flex items-center justify-center shrink-0"
                      th:classappend="${notificacion.tipo == 'CHECKIN' ? 'bg-green-500/20 text-green-400' : (notificacion.tipo == 'SOLICITUD' ? 'bg-blue-500/20 text-blue-400' : 'bg-primary/20 text-primary')}"
                    >
                      <span
                        class="material-symbols-outlined text-sm"
                        th:text="${notificacion.tipo == 'CHECKIN' ? 'login' : (notificacion.tipo == 'SOLICITUD' ? 'calendar_add_on' : 'notifications')}"
                        >notifications</span
                      >
                    </div>
                    <div class="flex-1 min-w-0">
                      <p
                        class="text-sm font-medium text-white truncate"
                        th:text="${notificacion.titulo}"
                      >
                        Título
                      </p>
                      <p
                        class="text-xs text-white/60 line-clamp-2 mt-0.5"
                        th:text="${notificacion.mensaje}"
                      >
                        Mensaje
                      </p>
                      <p
                        class="text-[10px] text-white/30 mt-1.5"
                        th:text="${notificacion.tiempoRelativo}"
                      >
                        Hace 5 min
                      </p>
                    </div>
                    <div
                      th:if="${!notificacion.leida}"
                      class="size-2 rounded-full bg-primary mt-1.5"
                    ></div>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Breadcrumbs Fragment -->
    <div
      th:fragment="breadcrumbs"
      class="flex flex-wrap gap-2 items-center mt-1"
    >
      <a
        class="text-white/40 hover:text-primary text-sm font-medium transition-colors"
        th:href="@{/dashboard}"
        >Inicio</a
      >
      <span class="material-symbols-outlined text-white/20 text-xs"
        >chevron_right</span
      >
      <span class="text-white/80 text-sm font-medium" th:text="${pageName}"
        >Página Actual</span
      >
    </div>

    <!-- Footer Fragment -->
    <footer
      th:fragment="footer"
      class="flex flex-col gap-6 px-10 py-8 text-center border-t border-white/5 mt-auto"
    >
      <div
        class="flex flex-wrap items-center justify-center gap-6 sm:justify-between"
      >
        <p class="text-white/30 text-sm font-medium">
          © 2024 Oasis Digital. Todos los derechos reservados.
        </p>
        <div class="flex flex-wrap items-center justify-center gap-8">
          <a
            class="text-white/40 hover:text-white text-sm font-medium transition-colors"
            href="#"
            >Ayuda</a
          >
          <a
            class="text-white/40 hover:text-white text-sm font-medium transition-colors"
            href="#"
            >Privacidad</a
          >
          <a
            class="text-white/40 hover:text-white text-sm font-medium transition-colors"
            href="#"
            >Soporte</a
          >
        </div>
      </div>
    </footer>

    <!-- Auth Animations Script -->
    <script th:src="@{/js/auth-animations.js}"></script>
  </body>
</html>
