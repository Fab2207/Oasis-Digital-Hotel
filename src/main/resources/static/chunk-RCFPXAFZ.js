import{a as O}from"./chunk-6AL5JYWX.js";import{a as R}from"./chunk-IOAMSEWY.js";import"./chunk-HAICC4VJ.js";import{s as B}from"./chunk-SW222O52.js";import{D as r,E as y,H as h,Ha as z,J as m,M as N,N as t,O as i,P as b,S as v,T as x,U as u,W as C,X as n,Y as S,Z as d,_ as I,da as k,ha as F,ka as g,ma as w,na as T,q as E,sa as j,ta as V,u as f,ua as D,v as p,xa as M,za as A}from"./chunk-DBIQ3VVQ.js";var q=(o,c,e)=>({"bg-primary/5 border-primary/20":o,"bg-[#121212]":c,"ring-2 ring-primary ring-offset-2 ring-offset-[#1e1e1e]":e});function P(o,c){o&1&&b(0,"div",30)}function $(o,c){if(o&1){let e=v();t(0,"div",19),x("click",function(){let l=f(e).$implicit,s=u();return p(s.selectNotificacion(l))}),t(1,"div",20)(2,"div",21)(3,"span",22),n(4),i()(),t(5,"div",23)(6,"h4",24),n(7),i(),t(8,"p",25),n(9),i(),t(10,"div",26)(11,"span",27),n(12),i(),t(13,"span",28),n(14),g(15,"date"),i()()(),h(16,P,1,0,"div",29),i()()}if(o&2){let e=c.$implicit,a=u();m("ngClass",F(11,q,!e.leida,e.leida,(a.selectedNotificacion==null?null:a.selectedNotificacion.id)===e.id)),r(2),m("ngClass",e.tipo==="SISTEMA"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"),r(2),d(" ",e.tipo==="SISTEMA"?"settings":"info"," "),r(3),d(" ",e.titulo," "),r(2),d(" ",e.mensaje," "),r(3),d(" ",e.tipo," "),r(2),S(w(15,8,e.fechaCreacion,"medium")),r(2),m("ngIf",!e.leida)}}function G(o,c){o&1&&(t(0,"div",31)(1,"span",32),n(2,"notifications_off"),i(),t(3,"p"),n(4,"No hay notificaciones en esta vista"),i()())}function L(o,c){if(o&1){let e=v();t(0,"div",33)(1,"div",34),b(2,"div",35),t(3,"div",36)(4,"div",37)(5,"span",38),n(6),i(),t(7,"button",39),x("click",function(){f(e);let l=u();return p(l.closeDetail())}),t(8,"span",40),n(9,"close"),i()()(),t(10,"h2",41),n(11),i(),t(12,"p",42)(13,"span",43),n(14,"schedule"),i(),n(15),g(16,"date"),g(17,"date"),i()()(),t(18,"div",44)(19,"div",45)(20,"p",46),n(21),i()(),t(22,"div",47)(23,"button",48)(24,"span",43),n(25,"archive"),i(),n(26," Archivar "),i(),t(27,"button",49)(28,"span",43),n(29,"delete"),i(),n(30," Eliminar "),i()()()()}if(o&2){let e=u();r(6),d(" ",e.selectedNotificacion.tipo," "),r(5),d(" ",e.selectedNotificacion.titulo," "),r(4),I(" ",w(16,5,e.selectedNotificacion.fechaCreacion,"fullDate")," a las ",w(17,8,e.selectedNotificacion.fechaCreacion,"shortTime")," "),r(6),d(" ",e.selectedNotificacion.mensaje," ")}}function H(o,c){o&1&&(t(0,"div",50)(1,"div",51)(2,"span",52),n(3,"inbox"),i()(),t(4,"h3",53),n(5," Ninguna notificaci\xF3n seleccionada "),i(),t(6,"p",54),n(7," Selecciona una notificaci\xF3n de la lista para ver los detalles completos aqu\xED. "),i()())}var Z=(()=>{class o{constructor(e,a){this.dashboardService=e,this.route=a,this.notificaciones=[],this.filteredNotificaciones=[],this.filter="todas",this.selectedNotificacion=null}ngOnInit(){this.loadNotificaciones()}loadNotificaciones(){this.dashboardService.getNotifications().subscribe(e=>{this.notificaciones=e,this.applyFilter(),this.route.queryParams.subscribe(a=>{let l=a.id;if(l){let s=this.notificaciones.find(_=>_.id==l);s&&this.selectNotificacion(s)}})})}setFilter(e){this.filter=e,this.applyFilter()}applyFilter(){this.filter==="todas"?this.filteredNotificaciones=this.notificaciones.filter(e=>!e.archivada):this.filter==="no-leidas"?this.filteredNotificaciones=this.notificaciones.filter(e=>!e.leida&&!e.archivada):this.filteredNotificaciones=this.notificaciones.filter(e=>e.archivada)}selectNotificacion(e){this.selectedNotificacion=e,e.leida||this.dashboardService.markAsRead(e.id).subscribe(()=>{e.leida=!0})}closeDetail(){this.selectedNotificacion=null}static{this.\u0275fac=function(a){return new(a||o)(y(O),y(z))}}static{this.\u0275cmp=E({type:o,selectors:[["app-notificaciones"]],standalone:!0,features:[k],decls:29,vars:9,consts:[["noSelection",""],[1,"flex","h-screen","bg-background-light","dark:bg-background-dark","font-display"],[1,"flex-1","overflow-y-auto","p-8"],[1,"max-w-5xl","mx-auto"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-white","mb-2"],[1,"text-white/60"],[1,"flex","bg-white/5","p-1","rounded-lg","border","border-white/10"],[1,"px-4","py-2","rounded-md","text-sm","font-medium","transition-all",3,"click"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-[#1e1e1e]","border","border-white/10","rounded-2xl","overflow-hidden","flex","flex-col","h-[calc(100vh-12rem)]"],[1,"p-4","border-b","border-white/10","flex","justify-between","items-center","bg-white/5"],[1,"text-xs","font-bold","text-white/40","uppercase","tracking-widest"],[1,"px-2","py-1","bg-white/10","rounded-full","text-xs","text-white","font-mono"],[1,"overflow-y-auto","flex-1","p-2","space-y-2"],["class","group p-4 rounded-xl border border-white/5 hover:border-primary/30 hover:bg-white/5 cursor-pointer transition-all duration-200 relative overflow-hidden",3,"ngClass","click",4,"ngFor","ngForOf"],["class","h-full flex flex-col items-center justify-center text-white/30 p-8",4,"ngIf"],[1,"bg-[#1e1e1e]","border","border-white/10","rounded-2xl","overflow-hidden","h-[calc(100vh-12rem)]","relative"],["class","h-full flex flex-col animate-fadeIn",4,"ngIf","ngIfElse"],[1,"group","p-4","rounded-xl","border","border-white/5","hover:border-primary/30","hover:bg-white/5","cursor-pointer","transition-all","duration-200","relative","overflow-hidden",3,"click","ngClass"],[1,"flex","justify-between","items-start","gap-4"],[1,"size-10","rounded-full","flex","items-center","justify-center","shrink-0",3,"ngClass"],[1,"material-symbols-outlined","text-xl"],[1,"flex-1","min-w-0"],[1,"text-white","font-medium","truncate","group-hover:text-primary","transition-colors"],[1,"text-white/50","text-xs","mt-1","line-clamp-2"],[1,"flex","items-center","gap-2","mt-3"],[1,"text-[10px]","px-2","py-0.5","rounded-full","bg-white/5","text-white/40","border","border-white/5"],[1,"text-[10px]","text-white/30"],["class","size-2 rounded-full bg-primary shadow-[0_0_8px_rgba(43,238,121,0.5)]",4,"ngIf"],[1,"size-2","rounded-full","bg-primary","shadow-[0_0_8px_rgba(43,238,121,0.5)]"],[1,"h-full","flex","flex-col","items-center","justify-center","text-white/30","p-8"],[1,"material-symbols-outlined","text-4xl","mb-2","opacity-50"],[1,"h-full","flex","flex-col","animate-fadeIn"],[1,"p-6","border-b","border-white/10","bg-white/5","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-32","bg-primary/5","rounded-full","blur-3xl","-translate-y-1/2","translate-x-1/2"],[1,"relative","z-10"],[1,"flex","justify-between","items-start","mb-4"],[1,"px-3","py-1","rounded-full","text-xs","font-bold","bg-primary/20","text-primary","border","border-primary/20"],[1,"lg:hidden","p-2","hover:bg-white/10","rounded-lg","text-white/60",3,"click"],[1,"material-symbols-outlined"],[1,"text-2xl","font-bold","text-white","mb-2"],[1,"text-white/50","text-sm","flex","items-center","gap-2"],[1,"material-symbols-outlined","text-sm"],[1,"p-8","flex-1","overflow-y-auto"],[1,"prose","prose-invert","max-w-none"],[1,"text-lg","leading-relaxed","text-white/80","whitespace-pre-wrap"],[1,"mt-8","pt-8","border-t","border-white/10","flex","gap-4"],[1,"px-4","py-2","rounded-lg","bg-white/10","text-white","hover:bg-white/20","transition-all","text-sm","font-medium","border","border-white/5","flex","items-center","gap-2"],[1,"px-4","py-2","rounded-lg","bg-red-500/10","text-red-400","hover:bg-red-500/20","transition-all","text-sm","font-medium","border","border-red-500/20","flex","items-center","gap-2"],[1,"h-full","flex","flex-col","items-center","justify-center","text-white/20","p-8","text-center"],[1,"size-20","bg-white/5","rounded-full","flex","items-center","justify-center","mb-4"],[1,"material-symbols-outlined","text-4xl"],[1,"text-lg","font-bold","text-white/40","mb-1"],[1,"max-w-xs","mx-auto","text-sm"]],template:function(a,l){if(a&1){let s=v();t(0,"div",1),b(1,"app-sidebar"),t(2,"main",2)(3,"div",3)(4,"header",4)(5,"div")(6,"h1",5),n(7,"Notificaciones"),i(),t(8,"p",6),n(9,"Gesti\xF3n de alertas y avisos del sistema"),i()(),t(10,"div",7)(11,"button",8),x("click",function(){return f(s),p(l.setFilter("todas"))}),n(12," Todas "),i(),t(13,"button",8),x("click",function(){return f(s),p(l.setFilter("no-leidas"))}),n(14," No le\xEDdas "),i()()(),t(15,"div",9)(16,"div",10)(17,"div",11)(18,"span",12),n(19,"Lista de Avisos"),i(),t(20,"span",13),n(21),i()(),t(22,"div",14),h(23,$,17,15,"div",15)(24,G,5,0,"div",16),i()(),t(25,"div",17),h(26,L,31,11,"div",18)(27,H,8,0,"ng-template",null,0,T),i()()()()()}if(a&2){let s=C(28);r(11),N(l.filter==="todas"?"bg-primary text-white shadow-lg":"text-white/60 hover:text-white"),r(2),N(l.filter==="no-leidas"?"bg-primary text-white shadow-lg":"text-white/60 hover:text-white"),r(8),S(l.filteredNotificaciones.length),r(2),m("ngForOf",l.filteredNotificaciones),r(),m("ngIf",l.filteredNotificaciones.length===0),r(2),m("ngIf",l.selectedNotificacion)("ngIfElse",s)}},dependencies:[A,j,V,D,M,R,B]})}}return o})();export{Z as NotificacionesComponent};
