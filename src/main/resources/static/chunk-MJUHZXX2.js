import{a as Q}from"./chunk-IOAMSEWY.js";import{a as X}from"./chunk-YHTGSJXL.js";import"./chunk-HAICC4VJ.js";import{a as P,b as q,c as B,d as z,e as R,f as D,g as A,n as G,o as J,p as O,q as U,r as H,s as K}from"./chunk-SW222O52.js";import{$ as g,D as a,E as y,H as x,Ha as T,J as m,Ja as L,Ka as j,N as i,Na as N,O as t,P as v,S as C,T as V,U as u,W as F,X as o,Y as E,Z as S,a as _,aa as h,ba as b,da as I,q as M,u as c,ua as k,v as p,za as W}from"./chunk-DBIQ3VVQ.js";function Y(r,f){if(r&1&&(i(0,"div",31)(1,"span",32),o(2,"check_circle"),t(),i(3,"p",33),o(4),t()()),r&2){let n=u();a(4),E(n.success)}}function Z(r,f){if(r&1&&(i(0,"div",34)(1,"span",32),o(2,"error"),t(),i(3,"p",33),o(4),t()()),r&2){let n=u();a(4),E(n.error)}}function $(r,f){if(r&1){let n=C();i(0,"div",43)(1,"div",19)(2,"label",20),o(3,"Nombre de Usuario"),t(),i(4,"input",44),b("ngModelChange",function(e){c(n);let s=u(2);return h(s.usuario.username,e)||(s.usuario.username=e),p(e)}),t()(),i(5,"div",19)(6,"label",20),o(7,"Contrase\xF1a"),t(),i(8,"input",45),b("ngModelChange",function(e){c(n);let s=u(2);return h(s.usuario.password,e)||(s.usuario.password=e),p(e)}),t()()()}if(r&2){let n=u(2);a(4),g("ngModel",n.usuario.username),a(4),g("ngModel",n.usuario.password)}}function ee(r,f){if(r&1){let n=C();i(0,"div",35)(1,"div",36)(2,"div",37)(3,"input",38),b("ngModelChange",function(e){c(n);let s=u();return h(s.crearCuenta,e)||(s.crearCuenta=e),p(e)}),t(),v(4,"label",39)(5,"span",40),t(),i(6,"label",41),o(7," Crear cuenta de acceso web "),t()(),x(8,$,9,2,"div",42),t()}if(r&2){let n=u();a(3),g("ngModel",n.crearCuenta),a(5),m("ngIf",n.crearCuenta)}}function te(r,f){r&1&&(i(0,"span"),o(1,"Registrar Cliente"),t())}function ie(r,f){r&1&&(i(0,"span",49)(1,"span",50),o(2,"progress_activity"),t(),o(3," Procesando... "),t())}function ne(r,f){if(r&1&&(i(0,"button",46),x(1,te,2,0,"span",47)(2,ie,4,0,"span",48),t()),r&2){let n=u(),l=F(25);m("disabled",!l.form.valid||n.loading),a(),m("ngIf",!n.loading),a(),m("ngIf",n.loading)}}var ue=(()=>{class r{constructor(n,l,e){this.clienteService=n,this.router=l,this.route=e,this.isEditing=!1,this.cliente={id:0,nombres:"",apellidos:"",dni:"",email:"",telefono:"",totalReservas:0},this.crearCuenta=!1,this.usuario={username:"",password:""},this.loading=!1,this.error=null,this.success=null}ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&(this.isEditing=!0,this.loading=!0,this.clienteService.getById(+n).subscribe({next:l=>{this.cliente=l,this.loading=!1},error:l=>{this.error="No se pudo cargar el cliente.",this.loading=!1}}))}onSubmit(){if(this.loading=!0,this.error=null,this.success=null,this.isEditing)this.clienteService.actualizar(this.cliente.id,this.cliente).subscribe({next:()=>{this.success="Cliente actualizado correctamente.",this.loading=!1,setTimeout(()=>this.router.navigate(["/clientes"]),1500)},error:n=>{this.error="Error al actualizar cliente. Verifique los datos.",this.loading=!1}});else{let n=_({},this.cliente);this.crearCuenta&&this.usuario.username&&this.usuario.password&&(n.usuario=_({},this.usuario)),this.clienteService.create(n).subscribe({next:()=>{this.success="Cliente registrado correctamente.",this.loading=!1,setTimeout(()=>this.router.navigate(["/clientes"]),1500)},error:l=>{console.error("Error creating client:",l);let e=l.error?.message||(typeof l.error=="string"?l.error:null);this.error=e||"Error al registrar cliente. Verifique los datos.",this.loading=!1}})}}static{this.\u0275fac=function(l){return new(l||r)(y(X),y(L),y(T))}}static{this.\u0275cmp=M({type:r,selectors:[["app-cliente-form"]],standalone:!0,features:[I],decls:52,vars:16,consts:[["clienteForm","ngForm"],[1,"flex","min-h-screen","w-full","bg-background-light","dark:bg-background-dark","font-display","text-gray-900","dark:text-gray-100"],[1,"sticky","top-0","h-screen","z-30","shrink-0"],[1,"flex-1","flex","flex-col","min-w-0","relative"],[1,"h-16","border-b","border-white/5","bg-background-dark/50","backdrop-blur-xl","flex","items-center","justify-between","px-8","z-20","sticky","top-0"],[1,"flex","flex-col","justify-center"],[1,"text-xl","font-bold","text-white","tracking-tight"],[1,"flex","items-center","gap-2","text-xs","text-white/50"],["routerLink","/dashboard",1,"hover:text-primary","transition-colors"],[1,"material-symbols-outlined","text-[10px]"],["routerLink","/clientes",1,"hover:text-primary","transition-colors"],[1,"text-white"],[1,"p-8"],[1,"max-w-3xl","mx-auto"],["class","mb-6 p-4 rounded-xl bg-green-500/10 border border-green-500/20 text-green-400 flex items-center gap-3 animate-fade-in",4,"ngIf"],["class","mb-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 flex items-center gap-3 animate-fade-in",4,"ngIf"],[1,"glass-panel","border","border-white/10","rounded-2xl","p-8","shadow-xl"],[1,"space-y-6",3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"text-sm","font-bold","text-white/80"],["type","text","name","nombres","required","","placeholder","Ej. Juan Carlos",1,"w-full","bg-[#121212]","border","border-white/10","rounded-lg","px-4","py-3","text-white","placeholder-white/30","focus:border-primary","focus:ring-1","focus:ring-primary","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","ngModel","disabled"],["type","text","name","apellidos","required","","placeholder","Ej. P\xE9rez L\xF3pez",1,"w-full","bg-[#121212]","border","border-white/10","rounded-lg","px-4","py-3","text-white","placeholder-white/30","focus:border-primary","focus:ring-1","focus:ring-primary","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","ngModel","disabled"],["type","text","name","dni","required","","minlength","8","maxlength","8","pattern","\\d{8}","placeholder","Ej. 12345678",1,"w-full","bg-[#121212]","border","border-white/10","rounded-lg","px-4","py-3","text-white","placeholder-white/30","focus:border-primary","focus:ring-1","focus:ring-primary","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","ngModel","disabled"],["type","tel","name","telefono","required","","minlength","9","maxlength","9","pattern","\\d{9}","placeholder","Ej. 999888777",1,"w-full","bg-[#121212]","border","border-white/10","rounded-lg","px-4","py-3","text-white","placeholder-white/30","focus:border-primary","focus:ring-1","focus:ring-primary","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","ngModel","disabled"],[1,"space-y-2","md:col-span-2"],["type","email","name","email","required","","email","","placeholder","Ej. cliente@email.com",1,"w-full","bg-[#121212]","border","border-white/10","rounded-lg","px-4","py-3","text-white","placeholder-white/30","focus:border-primary","focus:ring-1","focus:ring-primary","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","ngModel","disabled"],["class","pt-6 border-t border-white/10",4,"ngIf"],[1,"flex","items-center","justify-end","gap-4","pt-6","border-t","border-white/10","mt-6"],["routerLink","/clientes",1,"px-6","py-3","rounded-xl","text-white/60","hover:text-white","hover:bg-white/5","transition-colors","font-bold","text-sm","cursor-pointer"],["type","submit","class","px-8 py-3 rounded-xl bg-primary text-white font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled",4,"ngIf"],[1,"mb-6","p-4","rounded-xl","bg-green-500/10","border","border-green-500/20","text-green-400","flex","items-center","gap-3","animate-fade-in"],[1,"material-symbols-outlined"],[1,"font-bold"],[1,"mb-6","p-4","rounded-xl","bg-red-500/10","border","border-red-500/20","text-red-400","flex","items-center","gap-3","animate-fade-in"],[1,"pt-6","border-t","border-white/10"],[1,"flex","items-center","gap-3","mb-4"],[1,"relative","inline-block","w-12","h-6","transition","duration-200","ease-in-out","rounded-full","cursor-pointer"],["type","checkbox","id","crearCuenta","name","crearCuenta",1,"peer","sr-only",3,"ngModelChange","ngModel"],["for","crearCuenta",1,"block","h-6","overflow-hidden","bg-white/10","rounded-full","cursor-pointer","peer-checked:bg-primary","transition-colors"],[1,"absolute","left-1","top-1","w-4","h-4","bg-white","rounded-full","transition-transform","peer-checked:translate-x-6"],["for","crearCuenta",1,"text-sm","font-bold","text-white","select-none","cursor-pointer"],["class","grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","animate-fade-in"],["type","text","name","username","required","","placeholder","Ej. juanperez",1,"w-full","bg-[#121212]","border","border-white/10","rounded-lg","px-4","py-3","text-white","placeholder-white/30","focus:border-primary","focus:ring-1","focus:ring-primary","transition-colors",3,"ngModelChange","ngModel"],["type","password","name","password","required","","minlength","6","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","bg-[#121212]","border","border-white/10","rounded-lg","px-4","py-3","text-white","placeholder-white/30","focus:border-primary","focus:ring-1","focus:ring-primary","transition-colors",3,"ngModelChange","ngModel"],["type","submit",1,"px-8","py-3","rounded-xl","bg-primary","text-white","font-bold","hover:bg-primary/90","transition-all","shadow-lg","shadow-primary/20","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center gap-2",4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"material-symbols-outlined","animate-spin","text-sm"]],template:function(l,e){if(l&1){let s=C();i(0,"div",1)(1,"div",2),v(2,"app-sidebar"),t(),i(3,"div",3)(4,"header",4)(5,"div",5)(6,"h2",6),o(7),t(),i(8,"div",7)(9,"a",8),o(10,"Inicio"),t(),i(11,"span",9),o(12,"chevron_right"),t(),i(13,"a",10),o(14,"Clientes"),t(),i(15,"span",9),o(16,"chevron_right"),t(),i(17,"span",11),o(18,"Formulario"),t()()()(),i(19,"main",12)(20,"div",13),x(21,Y,5,1,"div",14)(22,Z,5,1,"div",15),i(23,"div",16)(24,"form",17,0),V("ngSubmit",function(){return c(s),p(e.onSubmit())}),i(26,"div",18)(27,"div",19)(28,"label",20),o(29,"Nombres"),t(),i(30,"input",21),b("ngModelChange",function(d){return c(s),h(e.cliente.nombres,d)||(e.cliente.nombres=d),p(d)}),t()(),i(31,"div",19)(32,"label",20),o(33,"Apellidos"),t(),i(34,"input",22),b("ngModelChange",function(d){return c(s),h(e.cliente.apellidos,d)||(e.cliente.apellidos=d),p(d)}),t()(),i(35,"div",19)(36,"label",20),o(37,"DNI / Documento"),t(),i(38,"input",23),b("ngModelChange",function(d){return c(s),h(e.cliente.dni,d)||(e.cliente.dni=d),p(d)}),t()(),i(39,"div",19)(40,"label",20),o(41,"Tel\xE9fono"),t(),i(42,"input",24),b("ngModelChange",function(d){return c(s),h(e.cliente.telefono,d)||(e.cliente.telefono=d),p(d)}),t()(),i(43,"div",25)(44,"label",20),o(45,"Correo Electr\xF3nico"),t(),i(46,"input",26),b("ngModelChange",function(d){return c(s),h(e.cliente.email,d)||(e.cliente.email=d),p(d)}),t()()(),x(47,ee,9,2,"div",27),i(48,"div",28)(49,"a",29),o(50),t(),x(51,ne,3,3,"button",30),t()()()()()()()}l&2&&(a(7),S(" ",e.isEditing?"Detalle del Cliente":"Registrar Nuevo Cliente"," "),a(14),m("ngIf",e.success),a(),m("ngIf",e.error),a(8),g("ngModel",e.cliente.nombres),m("disabled",e.isEditing),a(4),g("ngModel",e.cliente.apellidos),m("disabled",e.isEditing),a(4),g("ngModel",e.cliente.dni),m("disabled",e.isEditing),a(4),g("ngModel",e.cliente.telefono),m("disabled",e.isEditing),a(4),g("ngModel",e.cliente.email),m("disabled",e.isEditing),a(),m("ngIf",!e.isEditing),a(3),S(" ",e.isEditing?"Volver":"Cancelar"," "),a(),m("ngIf",!e.isEditing))},dependencies:[W,k,K,A,q,P,B,z,G,O,U,H,J,D,R,N,j,Q],encapsulation:2})}}return r})();export{ue as ClienteFormComponent};
