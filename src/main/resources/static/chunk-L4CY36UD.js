import{d as V}from"./chunk-VPD64DAD.js";import"./chunk-HDTJ3KOH.js";import{a as O}from"./chunk-YG3CPSL3.js";import{a as j}from"./chunk-HAICC4VJ.js";import{D as a,E as b,H as x,J as o,Ka as N,N as e,O as t,P as f,S as g,T as w,U as p,X as i,Y as c,Z as l,a as _,b as E,da as C,fa as A,ka as I,la as D,q as S,sa as F,ta as T,u as h,ua as k,v as u,va as R,za as M}from"./chunk-DBIQ3VVQ.js";var P=s=>["/cliente/reservas",s];function $(s,d){s&1&&(e(0,"div",31)(1,"span",32),i(2,"event_busy"),t(),e(3,"p",33),i(4,"No hay reservas pr\xF3ximas"),t(),e(5,"a",34),i(6,"Crear Nueva Reserva"),t()())}function U(s,d){if(s&1&&(e(0,"div",37)(1,"div",38)(2,"div",39)(3,"div")(4,"span",40),i(5),t(),e(6,"h4",41),i(7),t()(),e(8,"span",42),i(9),t()(),e(10,"div",43)(11,"div",44)(12,"span",45),i(13,"Entrada"),t(),e(14,"span",46),i(15),t()(),e(16,"div",44)(17,"span",45),i(18,"Salida"),t(),e(19,"span",46),i(20),t()()(),e(21,"div",47)(22,"span",48),i(23,"Total a pagar"),t(),e(24,"span",41),i(25),t()()(),e(26,"div",49)(27,"a",50),i(28," Ver Detalles "),e(29,"span",51),i(30,"arrow_forward"),t()()()()),s&2){let r=d.$implicit,n=p(3);a(5),c(r.habitacionTipo),a(2),l(" Habitaci\xF3n ",r.habitacionNumero," "),a(),o("ngClass",n.getEstadoClass(r.estado)),a(),l(" ",r.estado," "),a(6),c(r.fechaInicio),a(5),c(r.fechaFin),a(5),l("$",r.total,""),a(2),o("routerLink",A(8,P,r.id))}}function B(s,d){if(s&1&&(e(0,"div",35),x(1,U,31,10,"div",36),t()),s&2){let r=p(2);a(),o("ngForOf",r.reservasActivas)}}function Z(s,d){if(s&1){let r=g();e(0,"tr",52)(1,"td",53)(2,"div",54),i(3),t(),e(4,"div",55),i(5),t()(),e(6,"td",53)(7,"div",56),i(8),t(),e(9,"div",55),i(10),t()(),e(11,"td",57),i(12),t(),e(13,"td",53)(14,"span",58),i(15),t()(),e(16,"td",59)(17,"button",60),w("click",function(){let m=h(r).$implicit,v=p(2);return u(v.viewDetails(m))}),i(18," VER "),t()()()}if(s&2){let r=d.$implicit,n=p(2);a(3),l(" Hab. ",r.habitacionNumero," "),a(2),l(" ",r.habitacionTipo," "),a(3),c(r.fechaInicio),a(2),l(" al ",r.fechaFin," "),a(2),l(" $",r.total," "),a(2),o("ngClass",n.getEstadoClass(r.estado)),a(),l(" ",r.estado," ")}}function q(s,d){s&1&&(e(0,"tr")(1,"td",61),i(2," No tienes reservas antiguas registradas "),t()())}function G(s,d){if(s&1){let r=g();e(0,"div",62)(1,"div",63)(2,"button",64),w("click",function(){h(r);let m=p(2);return u(m.closeDetailModal())}),e(3,"span",65),i(4,"close"),t()(),e(5,"div",66),f(6,"app-client-reserva-detail",67),t()()()}if(s&2){let r=p(2);a(6),o("reservaInput",r.activeReservaForModal)("isModal",!0)}}function J(s,d){if(s&1&&(e(0,"div",1)(1,"div",2),f(2,"div",3),e(3,"div",4)(4,"h2",5),i(5),t(),e(6,"p",6),i(7," Aqu\xED tienes un resumen de tu actividad reciente. "),t()()(),e(8,"div",7)(9,"div",8)(10,"div",9)(11,"span",10),i(12,"Pr\xF3ximas Reservas"),t(),e(13,"span",11),i(14,"calendar_month"),t()(),e(15,"p",12),i(16),t()(),e(17,"div",8)(18,"div",9)(19,"span",10),i(20,"Estancias Totales"),t(),e(21,"span",11),i(22,"history"),t()(),e(23,"p",12),i(24),t()(),e(25,"div",8)(26,"div",9)(27,"span",10),i(28,"Puntos de Lealtad"),t(),e(29,"span",11),i(30,"loyalty"),t()(),e(31,"p",13),i(32),t()(),e(33,"div",8)(34,"div",9)(35,"span",10),i(36,"Reservas Finalizadas"),t(),e(37,"span",11),i(38,"check_circle"),t()(),e(39,"p",12),i(40),t()()(),e(41,"div",14)(42,"div",15)(43,"span",16),i(44,"event_upcoming"),t(),e(45,"h3",17),i(46,"Pr\xF3ximas Reservas"),t()(),x(47,$,7,0,"div",18)(48,B,2,1,"div",19),t(),e(49,"div",14)(50,"div",15)(51,"span",20),i(52,"history"),t(),e(53,"h3",17),i(54,"Historial de Reservas"),t()(),e(55,"div",21)(56,"div",22)(57,"table",23)(58,"thead")(59,"tr",24)(60,"th",25),i(61,"Habitaci\xF3n"),t(),e(62,"th",25),i(63,"Fechas"),t(),e(64,"th",25),i(65,"Costo Total"),t(),e(66,"th",25),i(67,"Estado"),t(),e(68,"th",26),i(69,"Acciones"),t()()(),e(70,"tbody",27),x(71,Z,19,7,"tr",28)(72,q,3,0,"tr",29),t()()()()(),x(73,G,7,2,"div",30),t()),s&2){let r=d.ngIf,n=p();a(5),l(" Bienvenido, ",r.displayName.split(" ")[0]," "),a(11),c(n.stats.proximas),a(8),c(n.stats.totales),a(8),c(n.stats.puntos),a(8),c(n.stats.finalizadas),a(7),o("ngIf",n.reservasActivas.length===0),a(),o("ngIf",n.reservasActivas.length>0),a(23),o("ngForOf",n.reservasHistorial),a(),o("ngIf",n.reservasHistorial.length===0),a(),o("ngIf",n.showDetailModal)}}var ie=(()=>{class s{viewDetails(r){this.activeReservaForModal=r,this.showDetailModal=!0}closeDetailModal(){this.showDetailModal=!1,this.activeReservaForModal=null}constructor(r,n){this.authService=r,this.reservaService=n,this.currentUser$=this.authService.currentUser$,this.reservas=[],this.reservasActivas=[],this.reservasHistorial=[],this.showDetailModal=!1,this.activeReservaForModal=null,this.stats={proximas:0,totales:0,puntos:0,finalizadas:0},this.loading=!0}ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.reservaService.getMisReservas().subscribe({next:r=>{this.reservas=r.map(n=>{let m=0;n.servicios&&Array.isArray(n.servicios)&&(m=n.servicios.reduce((H,L)=>{let y=L.split(" - S/.");return H+(y.length===2?parseFloat(y[1]):0)},0));let v=(n.habitacionPrecio||0)*(n.diasEstadia||1),z=Math.max(0,v+m-(n.montoDescuento||0));return E(_({},n),{estado:n.estado||n.estadoReserva,total:z})}),this.processReservas(),this.loading=!1},error:r=>{console.error("Error loading reservas",r),this.loading=!1}})}processReservas(){let r=["PENDIENTE","CONFIRMADA","ACTIVA","PROCESANDO"];this.reservasActivas=this.reservas.filter(n=>r.includes(n.estado.toUpperCase())),this.reservasHistorial=this.reservas.filter(n=>!r.includes(n.estado.toUpperCase())),this.stats.proximas=this.reservasActivas.length,this.stats.totales=this.reservas.length,this.stats.finalizadas=this.reservas.filter(n=>n.estado.toUpperCase()==="FINALIZADA").length,this.stats.puntos=(this.stats.totales||0)*10}getEstadoClass(r){switch(r.toUpperCase()){case"PENDIENTE":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/50";case"CONFIRMADA":return"bg-blue-500/20 text-blue-400 border-blue-500/50";case"ACTIVA":return"bg-green-500/20 text-green-400 border-green-500/50";case"FINALIZADA":return"bg-gray-500/20 text-gray-400 border-gray-500/50";case"CANCELADA":return"bg-red-500/20 text-red-400 border-red-500/50";default:return"bg-white/10 text-white border-white/20"}}logout(){this.authService.logout()}static{this.\u0275fac=function(n){return new(n||s)(b(j),b(O))}}static{this.\u0275cmp=S({type:s,selectors:[["app-client-dashboard"]],standalone:!0,features:[C],decls:2,vars:3,consts:[["class","space-y-8 animate-fade-in",4,"ngIf"],[1,"space-y-8","animate-fade-in"],[1,"bg-gradient-to-r","from-[#1A1A1A]","to-[#121212]","border","border-white/5","rounded-2xl","p-8","relative","overflow-hidden","group"],[1,"absolute","top-0","right-0","w-64","h-64","bg-primary/10","rounded-full","blur-3xl","-mr-32","-mt-32","transition-transform","duration-1000","group-hover:scale-110"],[1,"relative","z-10"],[1,"text-3xl","font-bold","text-white","mb-2"],[1,"text-white/60"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-[#1A1A1A]","border","border-white/5","rounded-xl","p-6","hover:border-white/10","transition-colors"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-xs","font-bold","text-white/40","uppercase","tracking-wider"],[1,"material-symbols-outlined","text-white/20"],[1,"text-3xl","font-bold","text-white"],[1,"text-3xl","font-bold","text-[#D4AF37]"],[1,"space-y-4"],[1,"flex","items-center","gap-2"],[1,"material-symbols-outlined","text-primary"],[1,"text-lg","font-bold","text-white"],["class","bg-[#1A1A1A] border-2 border-dashed border-white/5 rounded-2xl p-12 flex flex-col items-center justify-center text-center gap-4",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",4,"ngIf"],[1,"material-symbols-outlined","text-white/50"],[1,"bg-[#1A1A1A]","border","border-white/5","rounded-2xl","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","text-left","text-sm"],[1,"border-b","border-white/5","text-white/40","uppercase","tracking-wider","text-xs","bg-white/[0.02]"],[1,"px-6","py-4","font-bold"],[1,"px-6","py-4","font-bold","text-right"],[1,"divide-y","divide-white/5"],["class","hover:bg-white/[0.02] transition-colors",4,"ngFor","ngForOf"],[4,"ngIf"],["class","fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",4,"ngIf"],[1,"bg-[#1A1A1A]","border-2","border-dashed","border-white/5","rounded-2xl","p-12","flex","flex-col","items-center","justify-center","text-center","gap-4"],[1,"material-symbols-outlined","text-4xl","text-white/20"],[1,"text-white/40","font-medium"],["routerLink","/reservas/crear",1,"text-primary","hover:underline","text-sm","font-bold","mt-2"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-6"],["class","bg-[#1A1A1A] border border-white/10 rounded-xl overflow-hidden group hover:border-primary/50 transition-all",4,"ngFor","ngForOf"],[1,"bg-[#1A1A1A]","border","border-white/10","rounded-xl","overflow-hidden","group","hover:border-primary/50","transition-all"],[1,"p-6","space-y-4"],[1,"flex","justify-between","items-start"],[1,"text-xs","font-bold","text-primary","uppercase","tracking-wider","mb-1","block"],[1,"text-xl","font-bold","text-white"],[1,"px-3","py-1","rounded-full","text-xs","font-bold","border",3,"ngClass"],[1,"space-y-2","py-4","border-y","border-white/5"],[1,"flex","items-center","justify-between","text-sm"],[1,"text-white/50"],[1,"text-white","font-medium"],[1,"flex","items-center","justify-between"],[1,"text-xs","text-white/40"],[1,"bg-white/5","px-6","py-3","flex","justify-between","items-center"],[1,"text-xs","font-bold","text-white/60","hover:text-white","transition-colors","uppercase","tracking-wider","flex","items-center","gap-1",3,"routerLink"],[1,"material-symbols-outlined","text-sm"],[1,"hover:bg-white/[0.02]","transition-colors"],[1,"px-6","py-4"],[1,"font-bold","text-white"],[1,"text-xs","text-white/50"],[1,"text-white"],[1,"px-6","py-4","font-medium","text-white"],[1,"px-2","py-0.5","rounded","text-[10px]","font-bold","border","border-white/10","uppercase",3,"ngClass"],[1,"px-6","py-4","text-right"],[1,"text-primary","hover:text-primary/80","font-bold","text-xs",3,"click"],["colspan","5",1,"px-6","py-12","text-center","text-white/30","italic"],[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","bg-black/80","backdrop-blur-sm","p-4","animate-fade-in"],[1,"bg-[#1A1A1A]","border","border-white/5","rounded-2xl","w-full","max-w-2xl","shadow-2xl","relative","max-h-[90vh]","overflow-y-auto"],[1,"absolute","top-4","right-4","text-white/60","hover:text-white","transition-colors","z-10","p-2","bg-black/20","rounded-full",3,"click"],[1,"material-symbols-outlined"],[1,"p-2"],[3,"reservaInput","isModal"]],template:function(n,m){n&1&&(x(0,J,74,10,"div",0),I(1,"async")),n&2&&o("ngIf",D(1,1,m.currentUser$))},dependencies:[M,F,T,k,R,N,V],encapsulation:2})}}return s})();export{ie as ClientDashboardComponent};
